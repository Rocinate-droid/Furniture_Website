{% extends 'main.html' %}
{% block content %}
{% load static %}

<style>
    /* Container */
    .login-container {
        display: flex;
        height: 100vh;
    }

    /* Left side - form */
    .login-form {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px;
        background: #fff;

        /* Fix overflow */
        overflow-y: auto;
        max-height: 100vh;
    }


    .login-box {
        max-width: 400px;
        width: 100%;
        padding-bottom: 30px;
        /* some space at bottom */
    }


    .login-box h2 {
        font-size: 28px;
        font-weight: 600;
        margin-bottom: 30px;
        color: #222;
    }

    /* Input fields */
    .login-box input {
        width: 100%;
        border: none;
        border-bottom: 1px solid #ccc;
        padding: 10px 0;
        margin-bottom: 25px;
        font-size: 15px;
        outline: none;
    }

    /* Button */
    .login-btn {
        width: 100%;
        padding: 14px;
        border: none;
        border-radius: 12px;
        background: #ff5c5c;
        color: #fff;
        font-weight: bold;
        font-size: 16px;
        cursor: pointer;
        transition: 0.3s ease;
    }

    .login-btn:hover {
        background: #ff3b3b;
    }

    /* Signup / Login link */
    .signup-text {
        margin-top: 20px;
        font-size: 14px;
        color: #333;
    }

    .signup-text a {
        color: #000;
        font-weight: 500;
        text-decoration: underline;
    }

    /* Right side - image */
    .login-image {
        flex: 1;
        background: url("{% static 'images/store-1.jpg' %}") no-repeat center center/cover;
    }
</style>


<div class="login-container">
    <!-- Left side -->
    <div class="login-form">
        <div class="login-box">

            {% if page == 'login' %}
            <h2>Sign in</h2>
            <form method="post" action="">
                {% csrf_token %}
                <input type="text" name="username" placeholder="Email address*" required />
                <input type="password" name="password" placeholder="Enter your password" required />
                {% if messages %}
                {% for message in messages %}
                <div class="text-danger">{{ message }}</div>
                {% endfor %}
                {% endif %}
                <button type="submit" class="login-btn">Login →</button>


            </form>
            <p class="signup-text">Don’t have an account? <a href="{% url 'registerpage' %}">Sign up</a></p>

            {% else %}
            <h2>Create your account</h2>
            <form method="post" action="">
                {% csrf_token %}
                <input type="email" name="username" placeholder="Email address*" required />
                {% if form.username.errors %}
                <ul class="errorlist">
                    {% for error in form.username.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
                <input type="text" name="first_name" placeholder="First Name" required />
                {% if form.first_name.errors %}
                <ul class="errorlist">
                    {% for error in form.first_name.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
                <input type="text" name="last_name" placeholder="Last Name" required />
                     {% if form.last_name.errors %}
        <ul class="errorlist">
            {% for error in form.last_name.errors %}
                <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% endif %}
                <input type="password" name="password1" placeholder="Enter your password" required />
                {% if form.password1.errors %}
                <ul class="errorlist" style="list-style-type: none;">
                    {% for error in form.password1.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
                <div id="confirmpassword"></div>
                <input type="password" name="password2" placeholder="Renter your password" required
                    oninput="checkPasswordMatch()" />
                {% if form.password2.errors %}
                <ul class="errorlist">
                    {% for error in form.password2.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
                {% endif %}

                <button type="submit" class="login-btn" id="createaccount">Create Account →</button>

            </form>
            <p class="signup-text">Already a user? <a href="{% url 'loginpage' %}">Login</a></p>
            {% endif %}

        </div>
    </div>

    <!-- Right side image -->
    <div class="login-image"></div>
</div>

<script>
    function checkPasswordMatch() {
        const password = document.getElementsByName("password1")[0].value;
        const password2 = document.getElementsByName("password2")[0].value;
        const element = document.getElementById("confirmpassword");
        const submitbutton = document.getElementById("createaccount")

        const innerelement = document.createElement("p");
        innerelement.textContent = "Passwords do not match";
        innerelement.style.fontSize = "smaller";
        innerelement.style.color = "red";

        if (password == password2) {
            element.innerHTML = "";
            submitbutton.disabled = false;

        } else {
            element.innerHTML = "";
            element.appendChild(innerelement);
            submitbutton.disabled = true;
        }
    }
</script>

{% endblock content %}